<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>OC INWENTARYZACJA ‚Äî Proponowana Ilo≈õƒá</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f0f4f8, #dbeafe);
      margin: 0;
      padding: 20px;
    }
    h1 {
      color: #0d47a1;
      font-size: 26px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 0 12px rgba(0,0,0,0.05);
    }
    th, td {
      padding: 14px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }
    th {
      background-color: #2196f3;
      color: white;
    }
    .qty-cell {
      font-size: 18px;
      font-weight: bold;
    }
    .proposed-box {
      border: 1px solid #2196f3;
      padding: 6px 10px;
      margin-top: 6px;
      border-radius: 6px;
      background: #e3f2fd;
      font-size: 14px;
    }
    .proposed-box.subtract {
      border: 1px solid #f44336;
      background: #ffebee;
    }
    .proposed-box span {
      font-weight: bold;
      font-size: 18px;
    }
    .proposed-box.add span {
      color: #0d47a1;
    }
    .proposed-box.subtract span {
      color: #b71c1c;
    }
    button {
      border: none;
      padding: 6px 10px;
      margin: 2px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
    }
    .plus { background-color: #4caf50; color: white; }
    .minus { background-color: #f44336; color: white; }
    .confirm { background-color: #2196f3; color: white; }
    .reset { background-color: #9e9e9e; color: white; }
    @keyframes pulse {
      0% { background-color: #e3f2fd; }
      50% { background-color: #bbdefb; }
      100% { background-color: #e3f2fd; }
    }
    @keyframes pulse-red {
      0% { background-color: #ffebee; }
      50% { background-color: #ffcdd2; }
      100% { background-color: #ffebee; }
    }
    .pulse { animation: pulse 0.6s ease; }
    .pulse-red { animation: pulse-red 0.6s ease; }
  </style>
</head>
<body>
  <h1>OC INWENTARYZACJA ‚Äî Proponowana Ilo≈õƒá</h1>
  <table>
    <thead>
      <tr>
        <th>MODEL</th>
        <th>ILO≈öƒÜ</th>
        <th>EDYCJA</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>SM-A4</td>
        <td>
          <div class="qty-cell" id="qty-0">367</div>
          <div class="proposed-box add" id="proposed-wrapper-add-0">
            üü¶ <strong>DO DODANIA:</strong>
            <span id="proposed-add-0">0</span>
          </div>
          <div class="proposed-box subtract" id="proposed-wrapper-subtract-0">
            üü• <strong>DO ODJƒòCIA:</strong>
            <span id="proposed-subtract-0">0</span>
          </div>
        </td>
        <td>
          <button class="minus" onclick="changeQty(0, -1)">‚ûñ</button>
          <button class="plus" onclick="changeQty(0, 1)">‚ûï</button>
          <button class="confirm" onclick="setQty(0)">‚úîÔ∏è</button>
          <button class="reset" onclick="resetQty(0)">‚úñÔ∏è</button>
        </td>
      </tr>
      <tr>
        <td>F70</td>
        <td>
          <div class="qty-cell" id="qty-1">34</div>
          <div class="proposed-box add" id="proposed-wrapper-add-1">
            üü¶ <strong>DO DODANIA:</strong>
            <span id="proposed-add-1">0</span>
          </div>
          <div class="proposed-box subtract" id="proposed-wrapper-subtract-1">
            üü• <strong>DO ODJƒòCIA:</strong>
            <span id="proposed-subtract-1">0</span>
          </div>
        </td>
        <td>
          <button class="minus" onclick="changeQty(1, -1)">‚ûñ</button>
          <button class="plus" onclick="changeQty(1, 1)">‚ûï</button>
          <button class="confirm" onclick="setQty(1)">‚úîÔ∏è</button>
          <button class="reset" onclick="resetQty(1)">‚úñÔ∏è</button>
        </td>
      </tr>
      <tr>
        <td>QVN01</td>
        <td>
          <div class="qty-cell" id="qty-2">124</div>
          <div class="proposed-box add" id="proposed-wrapper-add-2">
            üü¶ <strong>DO DODANIA:</strong>
            <span id="proposed-add-2">0</span>
          </div>
          <div class="proposed-box subtract" id="proposed-wrapper-subtract-2">
            üü• <strong>DO ODJƒòCIA:</strong>
            <span id="proposed-subtract-2">0</span>
          </div>
        </td>
        <td>
          <button class="minus" onclick="changeQty(2, -1)">‚ûñ</button>
          <button class="plus" onclick="changeQty(2, 1)">‚ûï</button>
          <button class="confirm" onclick="setQty(2)">‚úîÔ∏è</button>
          <button class="reset" onclick="resetQty(2)">‚úñÔ∏è</button>
        </td>
      </tr>
    </tbody>
  </table>

  <script>
    const proposedAddQtyMap = {};
    const proposedSubtractQtyMap = {};

    function changeQty(index, delta) {
      if (delta > 0) {
        proposedAddQtyMap[index] = (proposedAddQtyMap[index] || 0) + delta;
        updateDisplay(index, 'add', proposedAddQtyMap[index]);
      } else {
        proposedSubtractQtyMap[index] = (proposedSubtractQtyMap[index] || 0) + Math.abs(delta);
        updateDisplay(index, 'subtract', proposedSubtractQtyMap[index]);
      }
    }

    function updateDisplay(index, type, value) {
      const el = document.getElementById(`proposed-${type}-${index}`);
      if (el) {
        el.textContent = value;
        const box = document.getElementById(`proposed-wrapper-${type}-${index}`);
        if (box) {
          box.classList.remove("pulse", "pulse-red");
          void box.offsetWidth; // force reflow
          box.classList.add(type === 'add' ? "pulse" : "pulse-red");
          setTimeout(() => box.classList.remove(type === 'add' ? "pulse" : "pulse-red"), 600);
        }
      }
    }

    function resetQty(index) {
      proposedAddQtyMap[index] = 0;
      proposedSubtractQtyMap[index] = 0;
      updateDisplay(index, 'add', 0);
      updateDisplay(index, 'subtract', 0);
    }

    function setQty(index) {
      const qtyEl = document.getElementById(`qty-${index}`);
      const current = parseInt(qtyEl.textContent);
      const add = proposedAddQtyMap[index] || 0;
      const subtract = proposedSubtractQtyMap[index] || 0;
      const finalQty = current + add - subtract;
      qtyEl.textContent = finalQty;
      resetQty(index);
    }
  </script>
</body>
</html>
